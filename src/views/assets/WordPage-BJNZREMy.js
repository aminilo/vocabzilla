var L=(w,s,n)=>new Promise((r,l)=>{var u=t=>{try{c(n.next(t))}catch(d){l(d)}},p=t=>{try{c(n.throw(t))}catch(d){l(d)}},c=t=>t.done?r(t.value):Promise.resolve(t.value).then(u,p);c((n=n.apply(w,s)).next())});import{a as B,j as M,L as S,p as P,q as _,t as I,f as a,r as o,u as R,c as V,v as C,o as $,E as q,e as m,g as v,I as z,l as T,J as K,F as U,G as j,m as G,D as H}from"./vue-vendors-BgzxvA44.js";import{a as J,_ as O}from"./index-DZ5Qr93C.js";import{d as Q,_ as X}from"./debounce-Cvi6_DbW.js";import{a as A}from"./anime-DaNXu8ZO.js";import"./socket-CF4wHI2V.js";const Y=B({__name:"WordCard",props:{word:{}},setup(w){return(s,n)=>{const r=S("router-link");return a(),M(r,{to:`/en/words/${s.word}`,class:"text-xl md:text-2xl p-4 cursor-pointer select-none"},{default:P(()=>[_(I(s.word),1)]),_:1},8,["to"])}}}),Z={class:"page-container py-20 bg"},ee={class:"container mx-auto my-8 p-2 text-center"},te={class:"goBackLink"},oe=["placeholder"],re={key:0,class:"text-xl text-gray-400 mb-4 flex items-center animate-pulse"},ae={class:"mt-8 text-base md:text-lg lg:text-xl"},se=B({__name:"WordPage",setup(w){const s=R(),n=o(null),r=o(null),l=o(""),u=o([]),p=o(!1),c=o(1),t=o(Number(s.query.pageSize)||12),d=o(!1),h=/Mobi|Android/i.test(navigator.userAgent),k=navigator.platform.toUpperCase().includes("MAC"),D=V(()=>`Search ${h?"":k?"(⌘+/)":"(Ctrl+/)"}`),y=o(null),F=()=>{if(!y.value)return;const e=y.value.querySelectorAll(".word-line");e.length&&A({targets:e,opacity:[0,1],translateX:[-30,0],easing:"easeOutExpo",duration:444,delay:A.stagger(111)})},f=()=>L(null,null,function*(){if(!(p.value||d.value)){p.value=!0;try{const{data:e}=yield J.get("/en/words",{params:{page:c.value,pageSize:t.value,search:l.value}});Array.isArray(e.words)?(u.value.push(...e.words),c.value++,e.words.length<t.value&&(d.value=!0),yield H(),setTimeout(()=>{F()},10)):console.warn("No words in response:",e)}catch(e){console.error("Failed to fetch words:",e)}finally{p.value=!1}}}),N=()=>{u.value=[],c.value=1,d.value=!1,f()},b=e=>{(e.key===" "||e.key==="Enter")&&(e.preventDefault(),f())},E=e=>{var g;(k?e.metaKey:e.ctrlKey)&&e.key==="/"&&(e.preventDefault(),(g=r.value)==null||g.focus())};return C(l,Q(()=>N(),300)),C(()=>s.fullPath,()=>{setTimeout(()=>{var e;return(e=r.value)==null?void 0:e.focus()},0)}),$(()=>{var e;(e=r.value)==null||e.focus(),f(),window.addEventListener("keydown",b),window.addEventListener("keydown",E)}),q(()=>{window.removeEventListener("keydown",b),window.removeEventListener("keydown",E)}),(e,i)=>{const g=S("router-link");return a(),m("main",Z,[v("div",ee,[v("div",te,[T(g,{to:"/"},{default:P(()=>i[1]||(i[1]=[_(" ← Back to Home ")])),_:1})]),z(v("input",{ref_key:"searchInput",ref:r,"onUpdate:modelValue":i[0]||(i[0]=x=>l.value=x),placeholder:D.value,class:"max-w-[250px] text-center text-xl p-4 rounded-lg mb-6 ring-2 hover:ring-4 border-amber-600 bg-transparent focus:outline-none focus:border-amber-500"},null,8,oe),[[K,l.value]]),p.value&&u.value.length===0?(a(),m("div",re,[T(X,{text:"Loading vocabulary..."})])):(a(),m("div",{key:1,class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 p-4 text-center",ref_key:"wordRef",ref:y},[(a(!0),m(U,null,j(u.value,(x,W)=>(a(),M(Y,{key:W,word:x.word,class:"word-line"},null,8,["word"]))),128))],512)),v("div",ae,[G(h)?(a(),m("button",{key:0,onClick:f,class:"border border-gray-500 px-3 py-1 rounded hover:bg-gradient-light dark:hover:bg-gradient-dark"}," Load More ")):(a(),m("p",{key:1,ref_key:"hintTxt",ref:n,class:"animate-bounce"},i[2]||(i[2]=[_(" Press "),v("strong",{class:"p-1"},"Enter",-1),_(" to Load more batch ")]),512))])])])}}}),pe=O(se,[["__scopeId","data-v-1a3543c3"]]);export{pe as default};
