var f=(g,d,a)=>new Promise((p,o)=>{var s=e=>{try{n(a.next(e))}catch(l){o(l)}},m=e=>{try{n(a.throw(e))}catch(l){o(l)}},n=e=>e.done?p(e.value):Promise.resolve(e.value).then(s,m);n((a=a.apply(g,d)).next())});import{a as x,r as v,e as i,g as t,k as w,l as y,w as _,I as k,J as h,t as c,K as C,p as M,L as V,q as P,i as B,f as u}from"./vue-vendors-BgzxvA44.js";import{a as b}from"./index-BBbVbfC8.js";import"./socket-CF4wHI2V.js";const R={class:"page-container bg"},S={class:"form-box"},D={class:"mb-2"},L={key:0,class:"input-error"},N={class:"mb-4 relative"},j=["type"],q={key:0,class:"input-error"},z={key:0,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},A={key:1,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"size-6"},E={key:0,class:"text-red-500 mt-4 text-center"},J=x({__name:"RegisterView",setup(g){const d=B(),a=v(!1),p=()=>a.value=!a.value,o=v({email:"",password:""}),s=v({email:"",password:"",general:""}),m=()=>f(null,null,function*(){var n,e,l;if(s.value={email:"",password:"",general:""},/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.value.email)||(s.value.email="Invalid email format."),o.value.password.length<8&&(s.value.password="Password must be at least 8 characters."),!(s.value.email||s.value.password))try{yield b.get("/csrf-token"),(n=(yield b.post("/auth/register",o.value)).data)!=null&&n.user&&d.push("/login")}catch(r){s.value.general=((l=(e=r==null?void 0:r.response)==null?void 0:e.data)==null?void 0:l.error)||"Registration failed. Please try again."}});return(n,e)=>{const l=V("router-link");return u(),i("div",R,[t("div",S,[e[8]||(e[8]=t("h3",{class:"text-2xl font-bold text-center mb-6"},"Register",-1)),t("form",{onSubmit:_(m,["prevent"])},[t("div",D,[e[2]||(e[2]=t("label",{for:"email",class:"input-label"},"Email",-1)),k(t("input",{required:"",id:"email",type:"email","onUpdate:modelValue":e[0]||(e[0]=r=>o.value.email=r),class:"input-field"},null,512),[[h,o.value.email]]),s.value.email?(u(),i("p",L,c(s.value.email),1)):w("",!0)]),t("div",N,[e[5]||(e[5]=t("label",{for:"password",class:"input-label"},"Password",-1)),k(t("input",{required:"",id:"password",type:a.value?"text":"password","onUpdate:modelValue":e[1]||(e[1]=r=>o.value.password=r),class:"input-field"},null,8,j),[[C,o.value.password]]),s.value.password?(u(),i("p",q,c(s.value.password),1)):w("",!0),t("button",{type:"button",onClick:p,class:"toggleShowPass"},[a.value?(u(),i("svg",z,e[3]||(e[3]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"},null,-1)]))):(u(),i("svg",A,e[4]||(e[4]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"},null,-1),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"},null,-1)])))])]),e[6]||(e[6]=t("button",{type:"submit",class:"form-btn center-btn"},"Register",-1))],32),s.value.general?(u(),i("p",E,c(s.value.general),1)):w("",!0),y(l,{to:"/login",class:"login-register-redirect"},{default:M(()=>e[7]||(e[7]=[P("‚Üê Log in")])),_:1})])])}}});export{J as default};
